(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[14],{2076:function(e,a,t){Promise.resolve().then(t.bind(t,9490))},9490:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return f},dynamic:function(){return i},fetchCache:function(){return c}});var r=t(7437),n=t(2265),o=t(7874),s=t.n(o);let i="force-dynamic",c="force-no-store",l="https://proyecto-evaluacioncatedraticos-back.onrender.com",d=e=>"".concat(l,"/v1").concat(e);async function m(e,a){if(!l)return{ok:!1,data:a,offline:!0};try{let t=new AbortController,r=setTimeout(()=>t.abort(),4e3),n=await fetch(d(e),{cache:"no-store",signal:t.signal});if(clearTimeout(r),!n.ok)return{ok:!1,data:a,offline:!0};let o=await n.json();return{ok:!0,data:o,offline:!1}}catch(e){return{ok:!1,data:a,offline:!0}}}async function u(e,a){if(!l)return{ok:!1,offline:!0};try{let t=await fetch(d(e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a),cache:"no-store"});return{ok:t.ok,offline:!1,status:t.status}}catch(e){return{ok:!1,offline:!0}}}let _={manejo_tema:0,claridad:0,dominio:0,interaccion:0,recursos:0};function f(){var e;let[a,t]=(0,n.useState)([]),[o,i]=(0,n.useState)(""),[c,d]=(0,n.useState)(_),[f,h]=(0,n.useState)(""),[b,x]=(0,n.useState)(!1),[j,p]=(0,n.useState)(""),[v,N]=(0,n.useState)(""),[y,F]=(0,n.useState)(!l),g=(0,n.useMemo)(()=>{try{let e=[navigator.userAgent,Intl.DateTimeFormat().resolvedOptions().timeZone,screen.width+"x"+screen.height].join("|");return btoa(unescape(encodeURIComponent(e))).slice(0,48)}catch(e){return}},[]);function k(){i(""),d(_),h(""),p(""),N("")}async function C(e){if(e.preventDefault(),p(""),N(""),y){alert("Backend no disponible. Intenta m\xe1s tarde.");return}let a=o?Object.values(c).some(e=>e<1||e>5)?"Todas las calificaciones deben ser entre 1 y 5":!f||f.trim().length<5?"El comentario debe tener al menos 5 caracteres":null:"Selecciona un catedr\xe1tico";if(a){p(a);return}x(!0);try{let e={teacher_id:o,...c,comment:(null!=f?f:"").trim()||void 0,fingerprint:g},a=await u("/evaluations",e);if(!a.ok){alert(a.offline?"Backend no disponible. Intenta m\xe1s tarde.":"Error ".concat(a.status||""));return}N("\xa1Evaluaci\xf3n enviada! Gracias por tu aporte an\xf3nimo."),k()}catch(e){p("Error al enviar la evaluaci\xf3n")}finally{x(!1)}}function S(e){let{label:a,field:t,value:n}=e;return(0,r.jsxs)("div",{className:s().formRow,children:[(0,r.jsx)("label",{className:s().label,children:a}),(0,r.jsx)("div",{className:s().stars,role:"radiogroup","aria-label":a,children:[1,2,3,4,5].map(e=>(0,r.jsx)("button",{type:"button",role:"radio","aria-checked":n===e,"aria-label":"".concat(a," ").concat(e," estrellas"),className:"".concat(s().starButton," ").concat(e<=n?s().starSelected:""),onClick:()=>{d(a=>({...a,[t]:e}))},children:"â˜…"},e))})]})}return(0,n.useEffect)(()=>{!async function(){p("");let e=await m("/teachers",[]);if(F(e.offline),!e.ok){t([]);return}t(e.data)}()},[]),(0,r.jsx)("main",{className:s().container,children:(0,r.jsx)("div",{className:s().card,children:(0,r.jsxs)("div",{className:s().grid,children:[(0,r.jsxs)("form",{onSubmit:C,children:[(0,r.jsx)("h1",{className:s().title,children:"Evaluaci\xf3n de Catedr\xe1tico"}),(0,r.jsx)("p",{className:s().subtitle,children:"Responde con sinceridad. Tu evaluaci\xf3n es an\xf3nima."}),(0,r.jsxs)("div",{className:s().section,children:[y&&(0,r.jsx)("div",{style:{padding:"8px",background:"#fff3cd",border:"1px solid #ffeeba",borderRadius:8,marginBottom:12,color:"#111"},children:"El backend no est\xe1 disponible. Puedes ver la UI, pero no se cargar\xe1n datos."}),(0,r.jsxs)("div",{className:s().formRow,children:[(0,r.jsx)("label",{htmlFor:"teacher",className:s().label,children:"Catedr\xe1tico"}),(0,r.jsxs)("select",{id:"teacher",className:s().select,value:o,onChange:e=>i(e.target.value),required:!0,children:[(0,r.jsx)("option",{value:"",disabled:!0,children:"Selecciona un catedr\xe1tico"}),0===a.length?(0,r.jsx)("option",{value:"",disabled:!0,children:y?"Sin conexi\xf3n al backend":"Sin datos"}):a.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,r.jsx)(S,{label:"Manejo del tema",field:"manejo_tema",value:c.manejo_tema}),(0,r.jsx)(S,{label:"Claridad al explicar",field:"claridad",value:c.claridad}),(0,r.jsx)(S,{label:"Dominio de la clase",field:"dominio",value:c.dominio}),(0,r.jsx)(S,{label:"Interacci\xf3n con estudiantes",field:"interaccion",value:c.interaccion}),(0,r.jsx)(S,{label:"Uso de recursos",field:"recursos",value:c.recursos}),(0,r.jsxs)("div",{className:s().formRow,children:[(0,r.jsx)("label",{htmlFor:"comment",className:s().label,children:"Comentario (obligatorio)"}),(0,r.jsx)("textarea",{id:"comment",className:s().textarea,rows:4,value:f,onChange:e=>h(e.target.value),placeholder:"Comparte tu experiencia (m\xednimo 5 caracteres)",required:!0,minLength:5})]}),(0,r.jsxs)("div",{className:s().actions,children:[(0,r.jsx)("button",{className:s().btnPrimary,type:"submit",disabled:b||y,children:b?"Enviando...":"Enviar"}),(0,r.jsx)("button",{className:s().btnGhost,type:"button",onClick:k,children:"Limpiar"})]}),(0,r.jsxs)("p",{className:s().averageText,children:["Promedio: ",((c.manejo_tema+c.claridad+c.dominio+c.interaccion+c.recursos)/5).toFixed(1)]}),j&&(0,r.jsx)("p",{className:s().error,children:j}),v&&(0,r.jsx)("p",{className:s().success,children:v}),(0,r.jsx)("p",{className:s().footerNote,children:"Nota: Se puede enviar un fingerprint an\xf3nimo para mejorar la integridad del sistema."})]})]}),(0,r.jsxs)("aside",{className:s().section,"aria-label":"Resumen de evaluaci\xf3n",children:[(0,r.jsx)("h2",{className:s().summaryTitle,children:"Resumen"}),(0,r.jsxs)("p",{className:s().summaryItem,children:["Catedr\xe1tico: ",o?null===(e=a.find(e=>e.id===o))||void 0===e?void 0:e.name:"No seleccionado"]}),(0,r.jsxs)("p",{className:s().summaryItem,children:["Promedio: ",((c.manejo_tema+c.claridad+c.dominio+c.interaccion+c.recursos)/5).toFixed(1)]}),(0,r.jsxs)("p",{className:s().summaryItem,children:["Comentario: ",f||"(Vac\xedo)"]})]})]})})})}},7874:function(e){e.exports={container:"Form_container__FwyX9",card:"Form_card__BcsL6",grid:"Form_grid__eFP5t",title:"Form_title__P1Nat",subtitle:"Form_subtitle__QpRJC",section:"Form_section__DPA1C",formRow:"Form_formRow__XyNKb",label:"Form_label__4nNJZ",select:"Form_select__WYlzK",textarea:"Form_textarea__2sQ0z",stars:"Form_stars__KqjoV",starButton:"Form_starButton__ELtpt",starSelected:"Form_starSelected__nvDKq",summaryTitle:"Form_summaryTitle__FCklT",summaryItem:"Form_summaryItem__iLAUd",averageText:"Form_averageText__1Pi9S",actions:"Form_actions__b0_jL",btnPrimary:"Form_btnPrimary__NUvXE",btnGhost:"Form_btnGhost__D8B2J",error:"Form_error__p9KLc",success:"Form_success__2IOJ9",footerNote:"Form_footerNote__cD4QD"}}},function(e){e.O(0,[488,971,117,744],function(){return e(e.s=2076)}),_N_E=e.O()}]);