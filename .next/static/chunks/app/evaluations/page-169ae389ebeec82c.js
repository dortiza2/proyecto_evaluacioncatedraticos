(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[14],{2076:function(e,a,r){Promise.resolve().then(r.bind(r,9490))},9490:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return l}});var t=r(7437),s=r(2265),o=r(7874),i=r.n(o);let n="https://proyecto-evaluacioncatedraticos-back.onrender.com";if(!n)throw Error("NEXT_PUBLIC_API_URL no configurada");let c={manejo_tema:0,claridad:0,dominio:0,interaccion:0,recursos:0};function l(){var e;let[a,r]=(0,s.useState)([]),[o,l]=(0,s.useState)(""),[m,d]=(0,s.useState)(c),[u,_]=(0,s.useState)(""),[h,v]=(0,s.useState)(!1),[j,x]=(0,s.useState)(""),[b,p]=(0,s.useState)(""),N=(0,s.useMemo)(()=>{try{let e=[navigator.userAgent,Intl.DateTimeFormat().resolvedOptions().timeZone,screen.width+"x"+screen.height].join("|");return btoa(unescape(encodeURIComponent(e))).slice(0,48)}catch(e){return}},[]);function f(){l(""),d(c),_(""),x(""),p("")}async function F(e){e.preventDefault(),x(""),p("");let a=o?Object.values(m).some(e=>e<1||e>5)?"Todas las calificaciones deben ser entre 1 y 5":!u||u.trim().length<5?"El comentario debe tener al menos 5 caracteres":null:"Selecciona un catedr\xe1tico";if(a){x(a);return}v(!0);try{let e={teacher_id:o,...m,comment:(null!=u?u:"").trim()||void 0,fingerprint:N},a="".concat(n,"/v1/evaluations");if(!(await fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw Error("No se pudo enviar la evaluaci\xf3n");p("\xa1Evaluaci\xf3n enviada! Gracias por tu aporte an\xf3nimo."),f()}catch(e){x(e.message||"Error al enviar la evaluaci\xf3n")}finally{v(!1)}}function y(e){let{label:a,field:r,value:s}=e;return(0,t.jsxs)("div",{className:i().formRow,children:[(0,t.jsx)("label",{className:i().label,children:a}),(0,t.jsx)("div",{className:i().stars,role:"radiogroup","aria-label":a,children:[1,2,3,4,5].map(e=>(0,t.jsx)("button",{type:"button",role:"radio","aria-checked":s===e,"aria-label":"".concat(a," ").concat(e," estrellas"),className:"".concat(i().starButton," ").concat(e<=s?i().starSelected:""),onClick:()=>{d(a=>({...a,[r]:e}))},children:"â˜…"},e))})]})}return(0,s.useEffect)(()=>{!async function(){try{x("");let e="".concat(n,"/v1/teachers"),a=await fetch(e,{cache:"no-store"});if(!a.ok)throw Error("No se pudo cargar la lista de catedr\xe1ticos");let t=await a.json();r(t)}catch(e){x(e.message||"Error al cargar docentes")}}()},[]),(0,t.jsx)("main",{className:i().container,children:(0,t.jsx)("div",{className:i().card,children:(0,t.jsxs)("div",{className:i().grid,children:[(0,t.jsxs)("form",{onSubmit:F,children:[(0,t.jsx)("h1",{className:i().title,children:"Evaluaci\xf3n de Catedr\xe1tico"}),(0,t.jsx)("p",{className:i().subtitle,children:"Responde con sinceridad. Tu evaluaci\xf3n es an\xf3nima."}),(0,t.jsxs)("div",{className:i().section,children:[(0,t.jsxs)("div",{className:i().formRow,children:[(0,t.jsx)("label",{htmlFor:"teacher",className:i().label,children:"Catedr\xe1tico"}),(0,t.jsxs)("select",{id:"teacher",className:i().select,value:o,onChange:e=>l(e.target.value),required:!0,children:[(0,t.jsx)("option",{value:"",disabled:!0,children:"Selecciona un catedr\xe1tico"}),a.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,t.jsx)(y,{label:"Manejo del tema",field:"manejo_tema",value:m.manejo_tema}),(0,t.jsx)(y,{label:"Claridad al explicar",field:"claridad",value:m.claridad}),(0,t.jsx)(y,{label:"Dominio de la clase",field:"dominio",value:m.dominio}),(0,t.jsx)(y,{label:"Interacci\xf3n con estudiantes",field:"interaccion",value:m.interaccion}),(0,t.jsx)(y,{label:"Uso de recursos",field:"recursos",value:m.recursos}),(0,t.jsxs)("div",{className:i().formRow,children:[(0,t.jsx)("label",{htmlFor:"comment",className:i().label,children:"Comentario (obligatorio)"}),(0,t.jsx)("textarea",{id:"comment",className:i().textarea,rows:4,value:u,onChange:e=>_(e.target.value),placeholder:"Comparte tu experiencia (m\xednimo 5 caracteres)",required:!0,minLength:5})]}),(0,t.jsxs)("div",{className:i().actions,children:[(0,t.jsx)("button",{className:i().btnPrimary,type:"submit",disabled:h,children:h?"Enviando...":"Enviar"}),(0,t.jsx)("button",{className:i().btnGhost,type:"button",onClick:f,children:"Limpiar"})]}),(0,t.jsxs)("p",{className:i().averageText,children:["Promedio: ",((m.manejo_tema+m.claridad+m.dominio+m.interaccion+m.recursos)/5).toFixed(1)]}),j&&(0,t.jsx)("p",{className:i().error,children:j}),b&&(0,t.jsx)("p",{className:i().success,children:b}),(0,t.jsx)("p",{className:i().footerNote,children:"Nota: Se puede enviar un fingerprint an\xf3nimo para mejorar la integridad del sistema."})]})]}),(0,t.jsxs)("aside",{className:i().section,"aria-label":"Resumen de evaluaci\xf3n",children:[(0,t.jsx)("h2",{className:i().summaryTitle,children:"Resumen"}),(0,t.jsxs)("p",{className:i().summaryItem,children:["Catedr\xe1tico: ",o?null===(e=a.find(e=>e.id===o))||void 0===e?void 0:e.name:"No seleccionado"]}),(0,t.jsxs)("p",{className:i().summaryItem,children:["Promedio: ",((m.manejo_tema+m.claridad+m.dominio+m.interaccion+m.recursos)/5).toFixed(1)]}),(0,t.jsxs)("p",{className:i().summaryItem,children:["Comentario: ",u||"(Vac\xedo)"]})]})]})})})}},7874:function(e){e.exports={container:"Form_container__FwyX9",card:"Form_card__BcsL6",grid:"Form_grid__eFP5t",title:"Form_title__P1Nat",subtitle:"Form_subtitle__QpRJC",section:"Form_section__DPA1C",formRow:"Form_formRow__XyNKb",label:"Form_label__4nNJZ",select:"Form_select__WYlzK",textarea:"Form_textarea__2sQ0z",stars:"Form_stars__KqjoV",starButton:"Form_starButton__ELtpt",starSelected:"Form_starSelected__nvDKq",summaryTitle:"Form_summaryTitle__FCklT",summaryItem:"Form_summaryItem__iLAUd",averageText:"Form_averageText__1Pi9S",actions:"Form_actions__b0_jL",btnPrimary:"Form_btnPrimary__NUvXE",btnGhost:"Form_btnGhost__D8B2J",error:"Form_error__p9KLc",success:"Form_success__2IOJ9",footerNote:"Form_footerNote__cD4QD"}}},function(e){e.O(0,[488,971,117,744],function(){return e(e.s=2076)}),_N_E=e.O()}]);